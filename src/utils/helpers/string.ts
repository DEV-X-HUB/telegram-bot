import { TableInlineKeyboardButtons, TableMarkupKeyboardButtons } from '../../types/ui';
import config from '../../config/config';

export const areEqaul = (text1: string, text2: string, ignoreCase?: boolean) => {
  if (ignoreCase) return text1.toLocaleLowerCase().trim() == text2.toLocaleLowerCase().trim();
  return text1.trim() == text2.trim();
};
export const formatNumberWithCommas = (num: number): string => {
  return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
};

export const isInInlineOption = (text: string, options: TableInlineKeyboardButtons) => {
  let exists = false;
  options.forEach((rowOption) => {
    rowOption.forEach((option) => {
      if (areEqaul(option.cbString, text, true)) exists = true;
    });
  });
  return exists;
};

// check if the text is in the markup options
export const isInMarkUPOption = (text: string, options: TableMarkupKeyboardButtons) => {
  let exists = false;
  options.forEach((rowOption) => {
    rowOption.forEach((option) => {
      if (areEqaul(option.text, text, true)) exists = true;
    });
  });
  return exists;
};

export const capitalizeFirstLetter = (word: string) => {
  return word[0].toLocaleUpperCase() + word.slice(1);
};

export const capitalize = (word: string) => {
  return word.charAt(0).toLocaleUpperCase() + word.slice(1);
};

export const getSectionName = (category: string) => {
  switch (category) {
    case 'Section 1A':
      return 'Service1A';
    case 'Section 1B':
      return 'Service1B';
    case 'Section 1C':
      return 'Service1C';
    case 'Section 1A':
      return 'Service1A';
    case 'Section 2':
      return 'Service2';
    case 'Section 3': {
      return 'Service3';
    }

    case 'Chicken Farm':
      return 'Service4ChickenFarm';
    case 'Construction':
      return 'Service4Construction';
    case 'Manufacture':
      return 'Service4Manufacture';
  }
};

export const formatAccountCreationEmailMsg = (password: string) => {
  return `<!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Account Created</title>
  </head>
  <body>
      <div style="font-family: Arial, sans-serif; text-align: center; margin: 20px;">
          <h1>ðŸŽ‰ Your admin account have been created successfuly! ðŸŽ‰</h1>
          <p style="font-size: 18px;">Use this password to sign in: <strong>${password}</strong></p>
          <p style="font-size: 14px; color: gray;">This message is generated by DummyBot. Please do not reply.</p>
      </div>
  </body>
  </html>
  `;
};
export const formatResetOptEmailMsg = (otp: string) => {
  return `<!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Reset Your Password</title>
 </head>
 <body>
     <div style="font-family: Arial, sans-serif; text-align: center; margin: 20px;">
         <h1>ðŸ”’ Use this OTP to reset your password: <span style="color: red; font-weight: bold;">${otp}</span></h1>
         <p style="font-size: 14px; color: gray;">This message is generated by DummyBot. Please do not reply.</p>
     </div>
 </body>
 </html>
 `;
};

export function extractElements<T>(arr: T[]): { firstNMinusOne: T[]; lastElement: T } | undefined {
  const length = arr.length;
  if (length < 2) return undefined; // If the array is empty, return undefined

  const firstNMinusOne = arr.slice(0, length - 1); // Extract first n-1 elements
  const lastElement = arr[length - 1]; // Extract the last element

  return { firstNMinusOne, lastElement }; // Return both arrays as a tuple
}

export const trimParagraph = (paragraph: string, maxLength: number = 4): string => {
  const words = paragraph.split(' ');
  if (words.length <= (parseInt(config.desc_preview_word_length as string) || 5)) {
    return paragraph;
  }
  return words.slice(0, maxLength).join(' ') + '...';
};
